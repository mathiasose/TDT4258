\subsection{Light Output}
\label{sec:light-output}

Having familiarised ourselves with the toolchain, we moved on to the next phase; manipulating the lights on the gamepad. It should be noted that we at this point had not yet decided on the functionality of our program. We knew however that it would involve the LEDs on the gamepad.

The gamepad was connected to the development boards GPIO ports A and C, with port A intended for output and port C for input. From the gamepad schematics (REF HERE) we saw that we would have to send a logical low signal on the relevant pins on GPIO port A to pull down the signal from $V_{CC}$ and light the LEDs. There is some setup required however. Every function on the microcontroller is governed by a clock, and interfacing with the GPIO ports is no exeption. We would have to enable the clock for GPIO in the CMU (Clock management unit). This is done by setting bit 13 in the CMU High frequency peripheral clock enable register.

\begin{lstlisting}[label=enable-gpio-clock,caption=Enabling GPIO clock in the CMU]
LDR T2, =CMU_BASE
LDR T0, [T2, #CMU_HFPERCLKEN0]
MOV T1, #1
LSL T1, T1, #CMU_HFPERCLKEN0_GPIO
ORR T0, T0, T1
STR T0, [T2, #CMU_HFPERCLKEN0]
\end{lstlisting}
