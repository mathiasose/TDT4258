\noindent{
\begin{minipage}{\linewidth}
\begin{lstlisting}[language=C, label=map_input, caption=Input decoding function]
int map_input(int input)
{
    input = ~input;
    for ( int i = 0; i < 8; i++) {
        int match = input & (1 << i);
        if ( (1 << i) == match ) {
            return (i+1);
        }
    }
    return 0;
}
\end{lstlisting}
\end{minipage}
}
